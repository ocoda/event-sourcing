## API Report File for "@ocoda/event-sourcing-mongodb"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { Document as Document_2 } from 'mongodb';
import { InstanceWrapper } from '@nestjs/core/injector/instance-wrapper';
import { Logger } from '@nestjs/common';
import { MongoClientOptions } from 'mongodb';
import { Type } from '@nestjs/common';

// Warning: (ae-forgotten-export) The symbol "EventEnvelopeMetadata" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export type MongoDBEventEntity = {
    _id: string;
    eventDate: string;
    streamId: string;
    event: string;
    payload: IEventPayload<IEvent>;
} & Document_2 & Omit<EventEnvelopeMetadata, 'eventId'>;

// Warning: (ae-forgotten-export) The symbol "EventStore" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export class MongoDBEventStore extends EventStore<MongoDBEventStoreConfig> {
    // Warning: (ae-forgotten-export) The symbol "EventEnvelope" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    appendEvents(stream: EventStream, aggregateVersion: number, events: IEvent[] | EventEnvelope[], pool?: IEventPool): Promise<EventEnvelope[]>;
    // (undocumented)
    connect(): Promise<void>;
    // (undocumented)
    disconnect(): Promise<void>;
    // Warning: (ae-forgotten-export) The symbol "IEventPool" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "IEventCollection" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    ensureCollection(pool?: IEventPool): Promise<IEventCollection>;
    // Warning: (ae-forgotten-export) The symbol "IAllEventsFilter" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    getAllEnvelopes(filter: IAllEventsFilter): AsyncGenerator<EventEnvelope[]>;
    // (undocumented)
    getEnvelope(input: EventStream, version: number, pool?: IEventPool): Promise<EventEnvelope>;
    // (undocumented)
    getEnvelopes(input: EventStream, filter?: IEventFilter): AsyncGenerator<EventEnvelope[]>;
    // (undocumented)
    getEvent(input: EventStream, version: number, pool?: IEventPool): Promise<IEvent>;
    // Warning: (ae-forgotten-export) The symbol "EventStream" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "IEventFilter" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    getEvents(input: EventStream, filter?: IEventFilter): AsyncGenerator<IEvent[]>;
    // Warning: (ae-forgotten-export) The symbol "IEventCollectionFilter" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    listCollections(filter?: IEventCollectionFilter): AsyncGenerator<IEventCollection[]>;
}

// Warning: (ae-forgotten-export) The symbol "EventStoreConfig" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export interface MongoDBEventStoreConfig extends EventStoreConfig, MongoClientOptions {
    // (undocumented)
    driver: Type<MongoDBEventStore>;
    // (undocumented)
    url: string;
}

// Warning: (ae-forgotten-export) The symbol "AggregateRoot" needs to be exported by the entry point index.d.ts
// Warning: (ae-forgotten-export) The symbol "SnapshotEnvelopeMetadata" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export type MongoDBSnapshotEntity<A extends AggregateRoot> = {
    _id: string;
    streamId: string;
    payload: ISnapshot<A>;
    aggregateName: string;
    latest?: string;
} & Document_2 & SnapshotEnvelopeMetadata;

// Warning: (ae-forgotten-export) The symbol "SnapshotStore" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export class MongoDBSnapshotStore extends SnapshotStore<MongoDBSnapshotStoreConfig> {
    // Warning: (ae-forgotten-export) The symbol "SnapshotEnvelope" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    appendSnapshot<A extends AggregateRoot>(stream: SnapshotStream, aggregateVersion: number, snapshot: ISnapshot<A>, pool?: ISnapshotPool): Promise<SnapshotEnvelope<A>>;
    // (undocumented)
    connect(): Promise<void>;
    // (undocumented)
    disconnect(): Promise<void>;
    // Warning: (ae-forgotten-export) The symbol "ISnapshotPool" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "ISnapshotCollection" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    ensureCollection(pool?: ISnapshotPool): Promise<ISnapshotCollection>;
    // (undocumented)
    getEnvelope<A extends AggregateRoot>(input: SnapshotStream, version: number, pool?: ISnapshotPool): Promise<SnapshotEnvelope<A>>;
    // (undocumented)
    getEnvelopes<A extends AggregateRoot>(input: SnapshotStream, filter?: ISnapshotFilter): AsyncGenerator<SnapshotEnvelope<A>[]>;
    // (undocumented)
    getLastEnvelope<A extends AggregateRoot>(stream: SnapshotStream, pool?: ISnapshotPool): Promise<SnapshotEnvelope<A> | void>;
    // Warning: (ae-forgotten-export) The symbol "ILatestSnapshotFilter" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    getLastEnvelopesForAggregate<A extends AggregateRoot>(aggregate: Type<A>, filter?: ILatestSnapshotFilter): AsyncGenerator<SnapshotEnvelope<A>[]>;
    // (undocumented)
    getLastSnapshot<A extends AggregateRoot>(stream: SnapshotStream, pool?: ISnapshotPool): Promise<ISnapshot<A> | void>;
    // (undocumented)
    getLastSnapshots<A extends AggregateRoot>(streams: SnapshotStream[], pool?: ISnapshotPool): Promise<Map<SnapshotStream, ISnapshot<A>>>;
    // (undocumented)
    getManyLastSnapshotEnvelopes<A extends AggregateRoot>(streams: SnapshotStream[], pool?: ISnapshotPool): Promise<Map<SnapshotStream, SnapshotEnvelope<A>>>;
    // (undocumented)
    getSnapshot<A extends AggregateRoot>(input: SnapshotStream, version: number, pool?: ISnapshotPool): Promise<ISnapshot<A>>;
    // Warning: (ae-forgotten-export) The symbol "SnapshotStream" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "ISnapshotFilter" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    getSnapshots<A extends AggregateRoot>(input: SnapshotStream, filter?: ISnapshotFilter): AsyncGenerator<ISnapshot<A>[]>;
    // Warning: (ae-forgotten-export) The symbol "ISnapshotCollectionFilter" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    listCollections(filter?: ISnapshotCollectionFilter): AsyncGenerator<ISnapshotCollection[]>;
}

// Warning: (ae-forgotten-export) The symbol "SnapshotStoreConfig" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export interface MongoDBSnapshotStoreConfig extends SnapshotStoreConfig, MongoClientOptions {
    // (undocumented)
    driver: Type<MongoDBSnapshotStore>;
    // (undocumented)
    url: string;
}

// Warnings were encountered during analysis:
//
// dist/index.d.ts:10:5 - (ae-forgotten-export) The symbol "IEventPayload" needs to be exported by the entry point index.d.ts
// dist/index.d.ts:10:5 - (ae-forgotten-export) The symbol "IEvent" needs to be exported by the entry point index.d.ts
// dist/index.d.ts:36:5 - (ae-forgotten-export) The symbol "ISnapshot" needs to be exported by the entry point index.d.ts

// (No @packageDocumentation comment for this package)

```
